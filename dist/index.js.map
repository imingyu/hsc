{"version":3,"file":"index.js","sources":["../src/store.js","../src/util.js","../src/options.js","../src/rules/rule.js","../src/rules/required.js","../src/rules/isType.js","../src/rules/index.js","../src/mtypes/helper.js","../src/mtypes/any.js","../src/mtypes/index.js","../src/index.js"],"sourcesContent":["const STORE = {};\r\nexport var getItem = (key) => {\r\n    return STORE[key];\r\n}\r\nexport var setItem = (key, value) => {\r\n    STORE[key] = value;\r\n}","export const uniqueID = () => {\r\n    return (Math.random() + '').replace('0.', '')\r\n}\r\n\r\nexport var isObject = (obj) => typeof obj === 'object';\r\nexport var isEmptyObject = (obj) => {\r\n    let prop;\r\n    for (prop in obj) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport const formatString = (template, values = {}) => {\r\n    return template.replace(/{([^}]*)}/g, function (match, key) {\r\n        return key in values ? values[key] : match;\r\n    });\r\n}\r\n\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n                function (obj) {\r\n                    return jQuery.type(obj) === 'array'\r\n                },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","var options = {\r\n    rules: {\r\n        required: {\r\n            label: '必填',\r\n            value: true,\r\n            trimString: true,\r\n            message: '此项{ruleLabel}'\r\n        }\r\n    }\r\n}\r\n\r\nexport default options;","import { getItem } from '../store.js';\r\nimport { extend, formatString } from '../util.js'\r\n\r\nexport default class Rule {\r\n    constructor(name, handler, options) {\r\n        this.name = name;\r\n        this.handler = handler;\r\n        this.options = options || {};\r\n    }\r\n\r\n    mount(typeIns) {\r\n        this.typeIns = typeIns;\r\n        let store = getItem(typeIns.id);\r\n        if (this.options.async) {\r\n            store.spec.async = true;\r\n        }\r\n        if (!store.spec.rules[this.name]) {\r\n            store.spec.rules[this.name] = true;\r\n            store.rules[this.name] = this;\r\n        }\r\n    }\r\n\r\n    validate(value, validateOptions) {\r\n        let computedOptions = this.computeOptions(validateOptions);\r\n        let store = getItem(this.typeIns.id);\r\n        let message = computedOptions.message;\r\n        let messageValues = {\r\n            value,\r\n            name: store.spec.name,\r\n            label: store.spec.label,\r\n            type: store.spec.type,\r\n            ruleName: this.name,\r\n            ruleLabel: computedOptions.label\r\n        }\r\n        if (typeof message === 'function') {\r\n            message = message(messageValues)\r\n        }\r\n        message = message ? formatString(message + '', messageValues) : '';\r\n\r\n        const validResult = this.handler.call(this, value, computedOptions);\r\n        if (typeof validResult === 'boolean') {\r\n            return {\r\n                valid: validResult,\r\n                message: message,\r\n                options: computedOptions\r\n            }\r\n        } else if (typeof validResult === 'object') {\r\n            validResult.options = computedOptions;\r\n            validResult.message = validResult.message || message;\r\n            return validResult;\r\n        } else {\r\n            throw new Error('验证规则返回值无效！')\r\n        }\r\n    }\r\n\r\n    computeOptions(...args) {\r\n        return extend.apply(null, [true, {}, this.options, ...args]);\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': val => {\r\n        return defaultHandler.number(val) || defaultHandler.boolean(val) || defaultHandler.object(val) || defaultHandler.array(val) || defaultHandler.string(val);\r\n    },\r\n    'number': val => {\r\n        return typeof val === 'number' && !isNaN(val);\r\n    },\r\n    'boolean': val => {\r\n        return typeof val === 'boolean';\r\n    },\r\n    'object': val => {\r\n        return typeof val === 'object' && val !== null && !isEmptyObject(obj);\r\n    },\r\n    'array': val => {\r\n        return Array.isArray(val) && val.length > 0;\r\n    },\r\n    'string': (val, trimString) => {\r\n        var type = typeof val;\r\n        if (type === 'number' && !isNaN(val)) {\r\n            return true;\r\n        }\r\n        if (type === 'string' && val) {\r\n            if (trimString) {\r\n                return val.trim() !== '';\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport default class Required extends Rule {\r\n    constructor() {\r\n        super('required', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options)\r\n        }, defaultOptions.rules.required)\r\n    }\r\n\r\n    mount(typeIns, mountOptions) {\r\n        this.mountedOptions = this.mountedOptions || {};\r\n        if (isObject(mountOptions) && !isEmptyObject(mountOptions)) {\r\n            extend(true, this.mountedOptions, mountOptions)\r\n        } else if (typeof mountOptions === 'string') {\r\n            this.mountedOptions.message = mountOptions;\r\n        } else if (typeof mountOptions === 'boolean') {\r\n            this.mountedOptions.value = mountOptions;\r\n        }\r\n        super.mount(typeIns);\r\n    }\r\n}","import defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': val => {\r\n        return true;\r\n    },\r\n    'array': val => {\r\n        return Array.isArray(val);\r\n    }\r\n};\r\n['string', 'object', 'boolean', 'number'].forEach(item => {\r\n    defaultHandler[item] = val => {\r\n        return typeof val === item;\r\n    }\r\n})\r\n\r\nexport default class IsType extends Rule {\r\n    constructor() {\r\n        super('isType', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options)\r\n        }, defaultOptions.rules.isType)\r\n    }\r\n}","import Required from './required.js';\r\nimport IsType from './isType.js';\r\n\r\nvar Rules = {\r\n    required: Required,\r\n    isType: IsType\r\n}\r\nexport default Rules;","import Rules from '../rules/index.js';\r\nimport Options from '../options.js';\r\nimport { getItem } from '../store.js'\r\n\r\nexport var addRule = (typeIns, ruleName, options) => {\r\n    new Rules[ruleName]().mount(typeIns, options)\r\n}\r\n\r\nexport var validate = (typeIns, value) => {\r\n    var store = getItem(typeIns.id)\r\n    return store.spec.async ? new Promse((resolve, reject) => {\r\n    }) : validateSync(typeIns, value);\r\n}\r\nexport var validateSync = (typeIns, value) => {\r\n    var store = getItem(typeIns.id)\r\n    var result = {\r\n        valid: true,\r\n        label: store.spec.label,\r\n        rules: {},\r\n        message: store.spec.message\r\n    }\r\n    Object.keys(store.rules).forEach(name => {\r\n        let rule = store.rules[name]\r\n        result.rules[name] = rule.validate(value);\r\n        result.valid = result.valid && result.rules[name].valid;\r\n    });\r\n    return result;\r\n}","import { setItem, getItem } from '../store.js';\r\nimport { addRule, validate } from './helper.js';\r\nimport { uniqueID } from '../util.js'\r\n\r\nclass MAny {\r\n    constructor() {\r\n        this.id = uniqueID();\r\n\r\n        const DATA = {\r\n            spec: {\r\n                name: '',\r\n                type: 'any',\r\n                label: '',\r\n                async: false,// 是否是异步方式验证\r\n                rules: {}\r\n            },\r\n            rules: {}\r\n        };\r\n        setItem(this.id, DATA); // 私有变量，保护功能\r\n        addRule(this, 'isType', {\r\n            value: DATA.spec.type\r\n        })\r\n    }\r\n    name(val) {\r\n        getItem(this.id).spec.name = val;\r\n        return this;\r\n    }\r\n    label(val) {\r\n        getItem(this.id).spec.label = val;\r\n        return this;\r\n    }\r\n    message(val) {\r\n        getItem(this.id).spec.message = val;\r\n        return this;\r\n    }\r\n    validate(value) {\r\n        return validate(this, value)\r\n    }\r\n}\r\n\r\n['required'].forEach(ruleName => {\r\n    MAny.prototype[ruleName] = function (...args) {\r\n        addRule.apply(null, [this, ruleName, ...args]);\r\n        return this;\r\n    }\r\n});\r\n\r\nexport default MAny;","import MAny from './any.js';\r\nexport default {\r\n    any: MAny\r\n}","import MType from './mtypes/index.js';\r\nimport { version } from '../package.json';\r\nconst MSchema = {\r\n    version\r\n};\r\n['any', 'string', 'number', 'object', 'boolean', 'array'].forEach(type => {\r\n    MSchema[type] = function () {\r\n        return new MType[type]()\r\n    }\r\n});\r\nexport default MSchema;"],"names":["STORE","getItem","key","setItem","value","uniqueID","Math","random","replace","isObject","obj","isEmptyObject","prop","formatString","template","values","match","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","hasOwnProperty","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","undefined","isFunction","isPlainObject","Rule","handler","typeIns","store","id","async","spec","rules","validateOptions","computedOptions","computeOptions","message","messageValues","label","validResult","Error","args","apply","defaultHandler","number","val","boolean","object","array","string","trimString","trim","Required","defaultOptions","required","mountOptions","mountedOptions","forEach","item","IsType","isType","Rules","addRule","ruleName","mount","validate","Promse","resolve","reject","validateSync","result","keys","rule","valid","MAny","DATA","MSchema","MType"],"mappings":"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"}