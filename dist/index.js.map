{"version":3,"file":"index.js","sources":["../src/store.js","../src/util.js","../src/options.js","../src/rules/rule.js","../src/rules/required.js","../src/rules/isType.js","../src/rules/async.js","../src/rules/min.js","../src/rules/max.js","../src/rules/regexes.js","../src/rules/index.js","../src/mtypes/helper.js","../src/mtypes/any.js","../src/mtypes/number.js","../src/mtypes/string.js","../src/mtypes/keys.js","../src/mtypes/object.js","../src/mtypes/index.js","../src/index.js"],"sourcesContent":["const STORE = {};\r\nexport var getItem = (key) => {\r\n    return STORE[key];\r\n}\r\nexport var setItem = (key, value) => {\r\n    STORE[key] = value;\r\n}","export const uniqueID = () => {\r\n    return (Math.random() + '').replace('0.', '')\r\n}\r\n\r\nexport var isObject = (obj) => typeof obj === 'object';\r\nexport var isFunction = (obj) => typeof obj === 'function' || obj instanceof Function;\r\nexport var isEmptyObject = (obj) => {\r\n    let prop;\r\n    for (prop in obj) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport const formatString = (template, values = {}) => {\r\n    return template.replace(/{([^}]*)}/g, function (match, key) {\r\n        return key in values ? values[key] : match;\r\n    });\r\n}\r\n\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n                function (obj) {\r\n                    return jQuery.type(obj) === 'array'\r\n                },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","var options = {\r\n    rules: {\r\n        required: {\r\n            label: '必填',\r\n            value: true,\r\n            trimString: true,\r\n            message: '此项{ruleLabel}'\r\n        },\r\n        max: {\r\n            label: '最大值',\r\n            message: {\r\n                any: '{ruleLabel}为{ruleValue}',\r\n                string: '长度{ruleLabel}为{ruleValue}'\r\n            }\r\n        },\r\n        min: {\r\n            label: '最小值',\r\n            message: {\r\n                any: '{ruleLabel}为{ruleValue}',\r\n                string: '长度{ruleLabel}为{ruleValue}'\r\n            }\r\n        },\r\n        isType: {\r\n            message: '值类型必须为{ruleValue}'\r\n        },\r\n        email: {\r\n            label: 'Email',\r\n            message: '值必须为{ruleLabel}格式'\r\n        }\r\n    },\r\n    regexes: {\r\n        affirmative: /^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,\r\n        alphaNumeric: /^[A-Za-z0-9]+$/,\r\n        caPostalCode: /^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\\s?[0-9][A-Z][0-9]$/,\r\n        creditCard: /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,\r\n        dateString: /^(1[0-2]|0?[1-9])([\\/-])(3[01]|[12][0-9]|0?[1-9])(?:\\2)(?:[0-9]{2})?[0-9]{2}$/,\r\n        email: /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i, // eslint-disable-line no-control-regex\r\n        eppPhone: /^\\+[0-9]{1,3}\\.[0-9]{4,14}(?:x.+)?$/,\r\n        hexadecimal: /^(?:0x)?[0-9a-fA-F]+$/,\r\n        hex: /^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,\r\n        ipv4: /^(?:(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])$/,\r\n        ipv6: /^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/i,\r\n        nanpPhone: /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,\r\n        socialSecurityNumber: /^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,\r\n        time: /^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,\r\n        ukPostCode: /^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,\r\n        url: /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/i,\r\n        usZipCode: /^[0-9]{5}(?:-[0-9]{4})?$/\r\n    }\r\n}\r\n\r\nexport default options;","import { getItem } from '../store.js';\r\nimport { extend, formatString, isFunction, isObject, isEmptyObject } from '../util.js';\r\n\r\nvar getValidResult = (validResult, message, computedOptions) => {\r\n    if (typeof validResult === 'boolean') {\r\n        return {\r\n            valid: validResult,\r\n            message: !validResult ? message : '',\r\n            options: computedOptions\r\n        }\r\n    } else if (typeof validResult === 'object') {\r\n        validResult.message = validResult.message || (!validResult.valid ? message : '');\r\n        validResult.options = computedOptions;\r\n        return validResult;\r\n    } else {\r\n        console.error('验证规则返回值无效！')\r\n    }\r\n}\r\n\r\nexport default class Rule {\r\n    constructor(name, handler, options) {\r\n        this.name = name;\r\n        this.handler = handler;\r\n        this.options = options || {};\r\n        this.mountedOptions = {}\r\n    }\r\n\r\n    mount(typeIns, mountOptions) {\r\n        this.typeIns = typeIns;\r\n        if (isObject(mountOptions) && !isEmptyObject(mountOptions)) {\r\n            extend(true, this.mountedOptions, mountOptions)\r\n        } else {\r\n            this.mountedOptions.value = mountOptions;\r\n        }\r\n        let store = getItem(typeIns.id);\r\n        var options = this.computeOptions();\r\n        if (options.async) {\r\n            store.spec.async = true;\r\n        }\r\n        store.rules[this.name] = this;\r\n    }\r\n\r\n    validate(value, callback) {\r\n        let computedOptions = this.computeOptions();\r\n        let store = getItem(this.typeIns.id);\r\n        let message = computedOptions.message;\r\n        let messageValues = {\r\n            value,\r\n            name: store.spec.name,\r\n            label: store.spec.label,\r\n            type: store.spec.type,\r\n            ruleName: this.name,\r\n            ruleValue: this.mountedOptions.value,\r\n            ruleLabel: computedOptions.label\r\n        }\r\n        if (isObject(message)) {\r\n            message = message[store.spec.type] ? message[store.spec.type] : message['any'];\r\n        }\r\n        if (isFunction(message)) {\r\n            message = message(messageValues);\r\n        } else if (typeof message === 'string') {\r\n            message = formatString(message + '', messageValues);\r\n        }\r\n        message = message ? message : '';\r\n\r\n        if (computedOptions.async) {\r\n            this.handler.call(this, value, computedOptions, (validResult) => {\r\n                var result = getValidResult(validResult, message, computedOptions);\r\n                if (isFunction(callback)) {\r\n                    callback(result)\r\n                }\r\n            });\r\n        } else {\r\n            return getValidResult(this.handler.call(this, value, computedOptions), message, computedOptions);\r\n        }\r\n    }\r\n\r\n    computeOptions(...args) {\r\n        return extend.apply(null, [true, {}, this.options, this.mountedOptions, ...args]);\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': val => {\r\n        return defaultHandler.number(val) || defaultHandler.boolean(val) || defaultHandler.object(val) || defaultHandler.array(val) || defaultHandler.string(val);\r\n    },\r\n    'number': val => {\r\n        return typeof val === 'number' && !isNaN(val);\r\n    },\r\n    'boolean': val => {\r\n        return typeof val === 'boolean';\r\n    },\r\n    'object': val => {\r\n        return typeof val === 'object' && val !== null && !isEmptyObject(val);\r\n    },\r\n    'array': val => {\r\n        return Array.isArray(val) && val.length > 0;\r\n    },\r\n    'string': (val, ops) => {\r\n        var type = typeof val;\r\n        if (type === 'number' && !isNaN(val)) {\r\n            return true;\r\n        }\r\n        if (type === 'string' && val) {\r\n            if (ops && ops.trimString) {\r\n                return val.trim() !== '';\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport default class Required extends Rule {\r\n    constructor() {\r\n        super('required', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            var result = (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options);\r\n            if (options.value) {\r\n                return result;\r\n            } else {\r\n                return true;\r\n            }\r\n        }, defaultOptions.rules.required)\r\n    }\r\n\r\n    mount(typeIns, mountOptions) {\r\n        this.mountedOptions = this.mountedOptions || {};\r\n        if (isObject(mountOptions) && !isEmptyObject(mountOptions)) {\r\n            extend(true, this.mountedOptions, mountOptions)\r\n        } else if (typeof mountOptions === 'string') {\r\n            this.mountedOptions.message = mountOptions;\r\n        } else if (typeof mountOptions === 'boolean') {\r\n            this.mountedOptions.value = mountOptions;\r\n        }\r\n        super.mount(typeIns);\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': val => {\r\n        return true;\r\n    },\r\n    'array': val => {\r\n        return Array.isArray(val);\r\n    }\r\n};\r\n['string', 'object', 'boolean', 'number'].forEach(item => {\r\n    defaultHandler[item] = val => {\r\n        return typeof val === item;\r\n    }\r\n})\r\n\r\nexport default class IsType extends Rule {\r\n    constructor() {\r\n        super('isType', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options)\r\n        }, defaultOptions.rules.isType)\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nexport default class AsyncRule extends Rule {\r\n    constructor() {\r\n        super('async', function (value, options, callback) {\r\n            setTimeout(() => {\r\n                callback(true)\r\n            }, 3 * 1000)\r\n        }, {\r\n            async: true\r\n        });\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': (target, limit) => {\r\n        return true;\r\n    },\r\n    'array': (target, limit) => {\r\n        return target && target.length >= limit ? true : false;\r\n    },\r\n    'string': (target, limit) => {\r\n        return target && target.length >= limit ? true : false;\r\n    },\r\n    'number': (target, limit) => {\r\n        if (typeof target === 'number') {\r\n            return target >= limit;\r\n        }\r\n        if (typeof target === 'string') {\r\n            return isNaN(target) ? false : target >= limit;\r\n        }\r\n        if (target && (target).valueOf) {\r\n            return (target).valueOf() >= limit;\r\n        }\r\n        return false;\r\n    }\r\n};\r\n\r\nexport default class Min extends Rule {\r\n    constructor() {\r\n        super('min', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options.value, options)\r\n        }, defaultOptions.rules.min)\r\n    }\r\n\r\n    mount(typeIns, mountOptions) {\r\n        if (isObject(mountOptions) && !isEmptyObject(mountOptions)) {\r\n            extend(true, this.mountedOptions, mountOptions)\r\n        } else if (typeof mountOptions === 'number') {\r\n            this.mountedOptions.value = mountOptions;\r\n        }\r\n        super.mount(typeIns);\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': (target, limit) => {\r\n        return true;\r\n    },\r\n    'array': (target, limit) => {\r\n        return !target || target && target.length <= limit ? true : false;\r\n    },\r\n    'string': (target, limit) => {\r\n        return !target || target && target.length <= limit ? true : false;\r\n    },\r\n    'number': (target, limit) => {\r\n        if (typeof target === 'number') {\r\n            return target <= limit;\r\n        }\r\n        if (typeof target === 'string') {\r\n            return target === '' || target.trim() === '' || isNaN(target) ? false : target <= limit;\r\n        }\r\n        if (target && (target).valueOf) {\r\n            return (target).valueOf() <= limit;\r\n        }\r\n        return false;\r\n    }\r\n};\r\n\r\nexport default class Max extends Rule {\r\n    constructor() {\r\n        super('max', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options.value, options)\r\n        }, defaultOptions.rules.max)\r\n    }\r\n\r\n    mount(typeIns, mountOptions) {\r\n        if (isObject(mountOptions) && !isEmptyObject(mountOptions)) {\r\n            extend(true, this.mountedOptions, mountOptions)\r\n        } else if (typeof mountOptions === 'number') {\r\n            this.mountedOptions.value = mountOptions;\r\n        }\r\n        super.mount(typeIns);\r\n    }\r\n}","import defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\n\r\nvar rules = {};\r\nObject.keys(defaultOptions.regexes).forEach(item => {\r\n    class RegexRule extends Rule {\r\n        constructor() {\r\n            super(item, function (value, options) {\r\n                return typeof value === 'string' && defaultOptions.regexes[item].test(value);\r\n            }, defaultOptions.rules[item]);\r\n        }\r\n    }\r\n    rules[item] = RegexRule;\r\n})\r\n\r\nclass Ip extends Rule {\r\n    constructor() {\r\n        super('ip', function (value, options) {\r\n            return typeof value === 'string' && (defaultOptions.regexes.ipv4.test(value) || defaultOptions.regexes.ipv6.test(value));\r\n        }, defaultOptions.rules.ip);\r\n    }\r\n}\r\nrules.ip = Ip;\r\nexport default rules","import Required from './required.js';\r\nimport IsType from './isType.js';\r\nimport AsyncRule from './async.js';\r\nimport Min from './min.js';\r\nimport Max from './max.js';\r\nimport RegexRules from './regexes.js';\r\n\r\n\r\nvar Rules = {\r\n    required: Required,\r\n    isType: IsType,\r\n    'async': AsyncRule,\r\n    min: Min,\r\n    max: Max\r\n}\r\nObject.keys(RegexRules).forEach(item => {\r\n    Rules[item] = RegexRules[item];\r\n})\r\nexport default Rules;","import Rules from '../rules/index.js';\r\nimport Options from '../options.js';\r\nimport { getItem } from '../store.js';\r\nimport { isFunction } from '../util.js';\r\n\r\nexport var registerRule = (mtype, rules) => {\r\n    rules.forEach(ruleName => {\r\n        if (Rules[ruleName]) {\r\n            mtype.prototype[ruleName] = function (...args) {\r\n                mountRule.apply(null, [this, ruleName, ...args]);\r\n                return this;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport var mountRule = (typeIns, ruleName, options) => {\r\n    new Rules[ruleName]().mount(typeIns, options)\r\n}\r\n\r\nexport var changeType = (typeIns, type) => {\r\n    getItem(typeIns.id).spec.type = type;\r\n    mountRule(typeIns, 'isType', {\r\n        value: type\r\n    })\r\n}\r\n\r\nexport var validate = (typeIns, value, callback) => {\r\n    var store = getItem(typeIns.id)\r\n    if (store.spec.async) {\r\n        var result = {\r\n            valid: true,\r\n            label: store.spec.label,\r\n            rules: {},\r\n            message: store.spec.message\r\n        }\r\n\r\n        var asyncRules = [];\r\n        Object.keys(store.rules).forEach(name => {\r\n            let rule = store.rules[name];\r\n            if (rule.options.async) {\r\n                asyncRules.push(rule)\r\n            } else {\r\n                result.rules[name] = rule.validate(value);\r\n                result.valid = result.valid && result.rules[name].valid;\r\n            }\r\n        });\r\n\r\n        var execSize = 0;\r\n        var checkIsEnd = () => {\r\n            execSize++;\r\n            if (execSize >= asyncRules.length) {\r\n                if (isFunction(callback)) {\r\n                    callback(result)\r\n                }\r\n            }\r\n        }\r\n\r\n        asyncRules.forEach(rule => {\r\n            rule.validate(value, validResult => {\r\n                result.rules[rule.name] = validResult;\r\n                result.valid = result.valid && result.rules[rule.name].valid;\r\n                checkIsEnd()\r\n            });\r\n        })\r\n    } else {\r\n        return validateSync(typeIns, value);\r\n    }\r\n}\r\nexport var validateSync = (typeIns, value) => {\r\n    var store = getItem(typeIns.id)\r\n    var result = {\r\n        valid: true,\r\n        name: store.spec.name,\r\n        label: store.spec.label,\r\n        rules: {}\r\n    }\r\n    Object.keys(store.rules).forEach(name => {\r\n        let rule = store.rules[name]\r\n        result.rules[name] = rule.validate(value);\r\n        result.valid = result.valid && result.rules[name].valid;\r\n    });\r\n    return result;\r\n}\r\n\r\nexport var mergeTypes = (...types) => {\r\n    var result;\r\n    types.forEach(type => {\r\n    });\r\n    return result;\r\n}","import { setItem, getItem } from '../store.js';\r\nimport { mountRule, validate, registerRule, mergeTypes } from './helper.js';\r\nimport { uniqueID } from '../util.js'\r\n\r\nclass MAny {\r\n    constructor() {\r\n        this.id = uniqueID();\r\n\r\n        const DATA = {\r\n            spec: {\r\n                name: '',\r\n                type: 'any',\r\n                label: '',\r\n                async: false// 是否是异步方式验证\r\n            },\r\n            rules: {}//保存rule实例\r\n        };\r\n        setItem(this.id, DATA); // 私有变量，保护功能\r\n    }\r\n    name(val) {\r\n        getItem(this.id).spec.name = val;\r\n        return this;\r\n    }\r\n    label(val) {\r\n        getItem(this.id).spec.label = val;\r\n        return this;\r\n    }\r\n    merge(...types) {\r\n        //合并类型：后面传递的的配置项的值会覆盖签名相同配置项的值\r\n        mergeTypes.apply(null, [this, ...types]);\r\n    }\r\n    validate(...args) {\r\n        return validate.apply(null, [this, ...args]);\r\n    }\r\n}\r\n\r\nregisterRule(MAny, ['required', 'async']);\r\n\r\nexport default MAny;","import MAny from './any.js';\r\nimport { registerRule, changeType } from './helper.js';\r\n\r\n\r\nclass MNumber extends MAny {\r\n    constructor() {\r\n        super();\r\n        changeType(this, 'number');\r\n    }\r\n}\r\n\r\n\r\nregisterRule(MNumber, ['min', 'max']);\r\n\r\nexport default MNumber;","import MAny from './any.js';\r\nimport { registerRule, changeType } from './helper.js';\r\n\r\n\r\nclass MString extends MAny {\r\n    constructor() {\r\n        super();\r\n        changeType(this, 'string');\r\n    }\r\n}\r\n\r\n\r\nregisterRule(MString, ['min', 'max', 'email', 'hex', 'ipv4', 'ipv6', 'ip', 'url', 'time']);\r\n\r\nexport default MString;","import MAny from './any.js';\r\nimport { registerRule, changeType, mergeTypes, validate, validateSync } from './helper.js';\r\nimport { setItem, getItem } from '../store.js';\r\n\r\nclass MKeys extends MAny {\r\n    constructor() {\r\n        super();\r\n        changeType(this, 'object');\r\n    }\r\n\r\n    keys(obj) {\r\n        var store = getItem(this.id);\r\n        store.keys = store.keys || {};//保存key实例，每个key实例其实就是一个MAny的子类实例\r\n        for (let prop in obj) {\r\n            if (obj[prop] instanceof MAny) {\r\n                if (store.keys[prop]) {\r\n                    store.keys[prop].merge(obj[prop]);\r\n                } else {\r\n                    store.keys[prop] = obj[prop]\r\n                }\r\n                var item = store.keys[prop];\r\n                store.spec.async = getItem(item.id).spec.async;//同步异步性\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    validate(value, callback) {\r\n        var store = getItem(this.id);\r\n        if (store.spec.async) {\r\n            validate(this, value, validResult => {\r\n                validResult.keys = {};\r\n\r\n                var keyTypes = Object.keys(store.keys).map(item => {\r\n                    return store.keys[item];\r\n                })\r\n\r\n                var execSize = 0;\r\n                var checkIsEnd = () => {\r\n                    execSize++;\r\n                    if (execSize >= keyTypes.length) {\r\n                        if (isFunction(callback)) {\r\n                            callback(validResult);\r\n                        }\r\n                    }\r\n                }\r\n                keyTypes.forEach(item => {\r\n                    item.validate(value[key], result => {\r\n                        validResult.keys[key] = result;\r\n                        validResult.valid = validResult.valid && validResult.keys[key].valid;\r\n                        checkIsEnd();\r\n                    });\r\n                });\r\n            });\r\n        } else {\r\n            var validResult = validate(this, value);\r\n            validResult.keys = {};\r\n            for (let key in store.keys) {\r\n                validResult.keys[key] = store.keys[key].validate(value[key]);\r\n                validResult.valid = validResult.valid && validResult.keys[key].valid;\r\n            }\r\n            return validResult;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nregisterRule(MKeys, []);\r\n\r\nexport default MKeys;","import MKeys from './keys.js';\r\nimport { registerRule, changeType } from './helper.js';\r\n\r\n\r\nclass MObject extends MKeys {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n\r\nexport default MObject;","import MAny from './any.js';\r\nimport MNumber from './number.js';\r\nimport MString from './string.js';\r\nimport MObject from './object.js';\r\n\r\nexport default {\r\n    any: MAny,\r\n    number: MNumber,\r\n    string: MString,\r\n    object: MObject\r\n}","import MType from './mtypes/index.js';\r\nimport { version } from '../package.json';\r\nconst MSchema = {\r\n    version,\r\n    validate(value, schema, callback) {\r\n        if (schema) {\r\n            return schema.validate(value, callback);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n};\r\n['any', 'string', 'number', 'object', 'boolean', 'array'].forEach(type => {\r\n    if (MType[type]) {\r\n        MSchema[type] = function () {\r\n            return new MType[type]()\r\n        }\r\n    }\r\n});\r\nexport default MSchema;"],"names":["STORE","getItem","key","setItem","value","uniqueID","Math","random","replace","isObject","obj","isFunction","Function","isEmptyObject","prop","formatString","template","values","match","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","hasOwnProperty","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","undefined","isPlainObject","getValidResult","validResult","message","computedOptions","valid","error","Rule","handler","mountedOptions","typeIns","mountOptions","store","id","computeOptions","async","spec","rules","callback","messageValues","label","result","args","apply","defaultHandler","number","val","boolean","object","array","string","ops","trimString","trim","Required","defaultOptions","required","forEach","item","IsType","isType","AsyncRule","limit","valueOf","Min","min","Max","max","keys","regexes","RegexRule","test","Ip","ipv4","ipv6","ip","Rules","RegexRules","registerRule","mtype","ruleName","mountRule","mount","changeType","validate","asyncRules","rule","push","execSize","checkIsEnd","validateSync","mergeTypes","types","MAny","DATA","MNumber","MString","MKeys","merge","keyTypes","map","MObject","MSchema","schema","MType"],"mappings":"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"}