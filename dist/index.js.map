{"version":3,"file":"index.js","sources":["../src/store.js","../src/util.js","../src/options.js","../src/rules/rule.js","../src/rules/required.js","../src/rules/isType.js","../src/rules/async.js","../src/rules/index.js","../src/mtypes/helper.js","../src/mtypes/any.js","../src/mtypes/index.js","../src/index.js"],"sourcesContent":["const STORE = {};\r\nexport var getItem = (key) => {\r\n    return STORE[key];\r\n}\r\nexport var setItem = (key, value) => {\r\n    STORE[key] = value;\r\n}","export const uniqueID = () => {\r\n    return (Math.random() + '').replace('0.', '')\r\n}\r\n\r\nexport var isObject = (obj) => typeof obj === 'object';\r\nexport var isFunction = (obj) => typeof obj === 'function' || obj instanceof Function;\r\nexport var isEmptyObject = (obj) => {\r\n    let prop;\r\n    for (prop in obj) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport const formatString = (template, values = {}) => {\r\n    return template.replace(/{([^}]*)}/g, function (match, key) {\r\n        return key in values ? values[key] : match;\r\n    });\r\n}\r\n\r\n\r\n// jQuery版extend函数\r\nexport var extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regexp',\r\n            '[object Object]': 'object'\r\n        },\r\n        jQuery = {\r\n            isFunction: function (obj) {\r\n                return jQuery.type(obj) === 'function'\r\n            },\r\n            isArray: Array.isArray ||\r\n                function (obj) {\r\n                    return jQuery.type(obj) === 'array'\r\n                },\r\n            isWindow: function (obj) {\r\n                return obj != null && obj == obj.window\r\n            },\r\n            isNumeric: function (obj) {\r\n                return !isNaN(parseFloat(obj)) && isFinite(obj)\r\n            },\r\n            type: function (obj) {\r\n                return obj == null ? String(obj) : class2type[toString.call(obj)] || 'object'\r\n            },\r\n            isPlainObject: function (obj) {\r\n                if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType) {\r\n                    return false\r\n                }\r\n                try {\r\n                    if (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n                        return false\r\n                    }\r\n                } catch (e) {\r\n                    return false\r\n                }\r\n                var key;\r\n                for (key in obj) { }\r\n                return key === undefined || hasOwn.call(obj, key)\r\n            }\r\n        };\r\n    if (typeof target === 'boolean') {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== 'object' && !jQuery.isFunction(target)) {\r\n        target = {}\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (i; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue\r\n                }\r\n                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : []\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // WARNING: RECURSION\r\n                    target[name] = extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}","var options = {\r\n    rules: {\r\n        required: {\r\n            label: '必填',\r\n            value: true,\r\n            trimString: true,\r\n            message: '此项{ruleLabel}'\r\n        }\r\n    }\r\n}\r\n\r\nexport default options;","import { getItem } from '../store.js';\r\nimport { extend, formatString, isFunction } from '../util.js';\r\n\r\nvar getValidResult = (validResult, message) => {\r\n    if (typeof validResult === 'boolean') {\r\n        return {\r\n            valid: validResult,\r\n            message: message\r\n        }\r\n    } else if (typeof validResult === 'object') {\r\n        validResult.message = validResult.message || message;\r\n        return validResult;\r\n    } else {\r\n        throw new Error('验证规则返回值无效！')\r\n    }\r\n}\r\n\r\nexport default class Rule {\r\n    constructor(name, handler, options) {\r\n        this.name = name;\r\n        this.handler = handler;\r\n        this.options = options || {};\r\n        this.mountedOptions = {}\r\n    }\r\n\r\n    mount(typeIns) {\r\n        this.typeIns = typeIns;\r\n        let store = getItem(typeIns.id);\r\n        if (this.options.async) {\r\n            store.spec.async = true;\r\n        }\r\n        if (!store.spec.rules[this.name]) {\r\n            store.spec.rules[this.name] = true;\r\n            store.rules[this.name] = this;\r\n        }\r\n    }\r\n\r\n    validate(value, callback) {\r\n        let computedOptions = this.computeOptions();\r\n        let store = getItem(this.typeIns.id);\r\n        let message = computedOptions.message;\r\n        let messageValues = {\r\n            value,\r\n            name: store.spec.name,\r\n            label: store.spec.label,\r\n            type: store.spec.type,\r\n            ruleName: this.name,\r\n            ruleLabel: computedOptions.label\r\n        }\r\n        if (typeof message === 'function') {\r\n            message = message(messageValues)\r\n        }\r\n        message = message ? formatString(message + '', messageValues) : '';\r\n\r\n        if (this.options.async) {\r\n            this.handler.call(this, value, computedOptions, (validResult) => {\r\n                var result = getValidResult(validResult, message);\r\n                if (isFunction(callback)) {\r\n                    callback(result)\r\n                }\r\n            });\r\n        } else {\r\n            return getValidResult(this.handler.call(this, value, computedOptions), message);\r\n        }\r\n    }\r\n\r\n    computeOptions(...args) {\r\n        return extend.apply(null, [true, {}, this.options, this.mountedOptions, ...args]);\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': val => {\r\n        return defaultHandler.number(val) || defaultHandler.boolean(val) || defaultHandler.object(val) || defaultHandler.array(val) || defaultHandler.string(val);\r\n    },\r\n    'number': val => {\r\n        return typeof val === 'number' && !isNaN(val);\r\n    },\r\n    'boolean': val => {\r\n        return typeof val === 'boolean';\r\n    },\r\n    'object': val => {\r\n        return typeof val === 'object' && val !== null && !isEmptyObject(obj);\r\n    },\r\n    'array': val => {\r\n        return Array.isArray(val) && val.length > 0;\r\n    },\r\n    'string': (val, ops) => {\r\n        var type = typeof val;\r\n        if (type === 'number' && !isNaN(val)) {\r\n            return true;\r\n        }\r\n        if (type === 'string' && val) {\r\n            if (ops && ops.trimString) {\r\n                return val.trim() !== '';\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport default class Required extends Rule {\r\n    constructor() {\r\n        super('required', function (value, options, callback) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options)\r\n        }, defaultOptions.rules.required)\r\n    }\r\n\r\n    mount(typeIns, mountOptions) {\r\n        this.mountedOptions = this.mountedOptions || {};\r\n        if (isObject(mountOptions) && !isEmptyObject(mountOptions)) {\r\n            extend(true, this.mountedOptions, mountOptions)\r\n        } else if (typeof mountOptions === 'string') {\r\n            this.mountedOptions.message = mountOptions;\r\n        } else if (typeof mountOptions === 'boolean') {\r\n            this.mountedOptions.value = mountOptions;\r\n        }\r\n        super.mount(typeIns);\r\n    }\r\n}","import defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nvar defaultHandler = {\r\n    'any': val => {\r\n        return true;\r\n    },\r\n    'array': val => {\r\n        return Array.isArray(val);\r\n    }\r\n};\r\n['string', 'object', 'boolean', 'number'].forEach(item => {\r\n    defaultHandler[item] = val => {\r\n        return typeof val === item;\r\n    }\r\n})\r\n\r\nexport default class IsType extends Rule {\r\n    constructor() {\r\n        super('isType', function (value, options) {\r\n            let store = getItem(this.typeIns.id);\r\n            return (defaultHandler[store.spec.type] || defaultHandler['any'])(value, options)\r\n        }, defaultOptions.rules.isType)\r\n    }\r\n}","import { isObject, isEmptyObject, extend } from '../util.js';\r\nimport defaultOptions from '../options.js';\r\nimport Rule from './rule.js';\r\nimport { getItem } from '../store.js';\r\n\r\nexport default class AsyncRule extends Rule {\r\n    constructor() {\r\n        super('async', function (value, options, callback) {\r\n            console.log(`start AsyncRule`)\r\n            setTimeout(() => {\r\n                callback(true)\r\n            }, 3 * 1000)\r\n        }, {\r\n            async: true\r\n        });\r\n    }\r\n}","import Required from './required.js';\r\nimport IsType from './isType.js';\r\nimport AsyncRule from './async.js';\r\n\r\nvar Rules = {\r\n    required: Required,\r\n    isType: IsType,\r\n    'async': AsyncRule\r\n}\r\nexport default Rules;","import Rules from '../rules/index.js';\r\nimport Options from '../options.js';\r\nimport { getItem } from '../store.js';\r\nimport { isFunction } from '../util.js';\r\n\r\nexport var addRule = (typeIns, ruleName, options) => {\r\n    new Rules[ruleName]().mount(typeIns, options)\r\n}\r\n\r\nexport var validate = (typeIns, value, callback) => {\r\n    var store = getItem(typeIns.id)\r\n    if (store.spec.async) {\r\n        var result = {\r\n            valid: true,\r\n            label: store.spec.label,\r\n            rules: {},\r\n            message: store.spec.message\r\n        }\r\n\r\n        var asyncRules = [];\r\n        Object.keys(store.rules).forEach(name => {\r\n            let rule = store.rules[name];\r\n            if (rule.options.async) {\r\n                asyncRules.push(rule)\r\n            } else {\r\n                result.rules[name] = rule.validate(value);\r\n                result.valid = result.valid && result.rules[name].valid;\r\n            }\r\n        });\r\n\r\n        var execSize = 0;\r\n        var checkIsEnd = () => {\r\n            execSize++;\r\n            if (execSize >= asyncRules.length) {\r\n                if (isFunction(callback)) {\r\n                    callback(result)\r\n                }\r\n            }\r\n        }\r\n\r\n        asyncRules.forEach(rule => {\r\n            rule.validate(value, validResult => {\r\n                result.rules[rule.name] = validResult;\r\n                result.valid = result.valid && result.rules[rule.name].valid;\r\n                checkIsEnd()\r\n            });\r\n        })\r\n    } else {\r\n        return validateSync(typeIns, value);\r\n    }\r\n}\r\nexport var validateSync = (typeIns, value) => {\r\n    var store = getItem(typeIns.id)\r\n    var result = {\r\n        valid: true,\r\n        label: store.spec.label,\r\n        rules: {},\r\n        message: store.spec.message\r\n    }\r\n    Object.keys(store.rules).forEach(name => {\r\n        let rule = store.rules[name]\r\n        result.rules[name] = rule.validate(value);\r\n        result.valid = result.valid && result.rules[name].valid;\r\n    });\r\n    return result;\r\n}","import { setItem, getItem } from '../store.js';\r\nimport { addRule, validate } from './helper.js';\r\nimport { uniqueID } from '../util.js'\r\n\r\nclass MAny {\r\n    constructor() {\r\n        this.id = uniqueID();\r\n\r\n        const DATA = {\r\n            spec: {\r\n                name: '',\r\n                type: 'any',\r\n                label: '',\r\n                async: false,// 是否是异步方式验证\r\n                rules: {}\r\n            },\r\n            rules: {}\r\n        };\r\n        setItem(this.id, DATA); // 私有变量，保护功能\r\n        addRule(this, 'isType', {\r\n            value: DATA.spec.type\r\n        })\r\n    }\r\n    name(val) {\r\n        getItem(this.id).spec.name = val;\r\n        return this;\r\n    }\r\n    label(val) {\r\n        getItem(this.id).spec.label = val;\r\n        return this;\r\n    }\r\n    message(val) {\r\n        getItem(this.id).spec.message = val;\r\n        return this;\r\n    }\r\n    validate(...args) {\r\n        return validate.apply(null, [this, ...args])\r\n    }\r\n}\r\n\r\n['required', 'async'].forEach(ruleName => {\r\n    MAny.prototype[ruleName] = function (...args) {\r\n        addRule.apply(null, [this, ruleName, ...args]);\r\n        return this;\r\n    }\r\n});\r\n\r\nexport default MAny;","import MAny from './any.js';\r\nexport default {\r\n    any: MAny\r\n}","import MType from './mtypes/index.js';\r\nimport { version } from '../package.json';\r\nconst MSchema = {\r\n    version\r\n};\r\n['any', 'string', 'number', 'object', 'boolean', 'array'].forEach(type => {\r\n    MSchema[type] = function () {\r\n        return new MType[type]()\r\n    }\r\n});\r\nexport default MSchema;"],"names":["STORE","getItem","key","setItem","value","uniqueID","Math","random","replace","isObject","obj","isFunction","Function","isEmptyObject","prop","formatString","template","values","match","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","toString","Object","prototype","hasOwn","hasOwnProperty","class2type","jQuery","type","Array","isArray","window","isNaN","parseFloat","isFinite","String","call","nodeType","constructor","e","undefined","isPlainObject","getValidResult","validResult","message","Error","Rule","handler","mountedOptions","typeIns","store","id","async","spec","rules","callback","computedOptions","computeOptions","messageValues","label","result","args","apply","defaultHandler","number","val","boolean","object","array","string","ops","trimString","trim","Required","defaultOptions","required","mountOptions","forEach","item","IsType","isType","AsyncRule","log","Rules","addRule","ruleName","mount","validate","asyncRules","keys","rule","push","valid","execSize","checkIsEnd","validateSync","MAny","DATA","MSchema","MType"],"mappings":"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"}